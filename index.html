<!DOCTYPE html>
<html lang="es">
<head>
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sonar Rock - La Radio Independiente</title>

  <!-- Tu CSS principal -->
  <link href="style.css" rel="stylesheet" type="text/css" />

  <!-- CSS del reproductor -->
  <link rel="stylesheet" href="player.css">

  <!-- Bootstrap Icons para los botones del reproductor -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.css">

  <!-- Font Awesome (ya lo ten√≠as, por si quieres √≠conos adicionales) -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

  <!-- PWA y favicons -->
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#ff6600">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="shortcut icon" href="/icons/favicon.ico">

  <!-- Apple Touch Icon -->
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
  <meta name="apple-mobile-web-app-title" content="Sonar Rock">

  <!-- Android Chrome Icons -->
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-chrome-192x192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="/icons/android-chrome-512x512.png">

  <!-- Evita traducci√≥n autom√°tica en Chrome -->
  <meta name="google" content="notranslate">
</head>

</head>
<body>
  
  <!-- Header -->
  <header class="header">
    <div class="container">
      <div class="logo-section">
        <img src="attached_assets/logo_1749601460841.jpeg" alt="Sonar Rock Logo" class="logo">
        <div class="title-section">
          <h1>LA RADIO INDEPENDIENTE</h1>
        </div>
      </div>
    </div>
  </header>

<!-- PLAYER -->
<section class="main-section">
  <div class="container">
    <div class="main-image-container">
      <img src="attached_assets/Sonarrock_1749601460841.jpeg" alt="Sonar Rock" class="main-image">

  <!-- Player Sonar Rock con imagen + efecto Matrix + metadatos -->
<div id="matrix-player">
  <img src="TU_IMAGEN_DE_FONDO.jpg" alt="Background" class="bg-img">
  <canvas id="matrix"></canvas>
  <div class="player-ui">
    <button id="play-btn">‚ñ∂Ô∏è</button>
    <button id="pause-btn">‚è∏Ô∏è</button>
    <button id="mute-btn">üîá</button>
    <div id="now-playing">Cargando canci√≥n...</div>
  </div>
  <audio id="audio" preload="auto" crossorigin="anonymous">
    <source src="https://stream.zeno.fm/ezq3fcuf5ehvv" type="audio/mpeg">
  </audio>
</div>

<style>
/* ===== Contenedor ===== */
#matrix-player {
  position: relative;
  width: 100%;
  height: 350px;
  overflow: hidden;
  border: 2px solid #0f0;
  border-radius: 12px;
}

/* Imagen de fondo */
.bg-img {
  position: absolute;
  top: 0; left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  z-index: 0;
}

/* Matrix encima */
#matrix {
  position: absolute;
  top: 0; left: 0;
  width: 100%;
  height: 100%;
  display: block;
  z-index: 1;
  mix-blend-mode: screen; /* Para que se vea integrado */
}

/* UI */
.player-ui {
  position: absolute;
  bottom: 10px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 2;
  text-align: center;
  color: #0f0;
  font-family: monospace;
  padding: 10px;
}
.player-ui button {
  background: rgba(0,0,0,0.7);
  color: #0f0;
  border: 1px solid #0f0;
  border-radius: 8px;
  padding: 10px 15px;
  margin: 5px;
  font-size: 18px;
  cursor: pointer;
}
.player-ui button:hover {
  background: rgba(0,255,0,0.2);
}
#now-playing {
  margin-top: 8px;
  font-size: 16px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 90vw;
}

/* Responsivo */
@media (max-width: 600px) {
  #matrix-player { height: 250px; }
  .player-ui button { font-size: 16px; padding: 8px 12px; }
  #now-playing { font-size: 14px; }
}
</style>
<script>
// ===== Matrix Code =====
const canvas = document.getElementById('matrix');
const ctx = canvas.getContext('2d');
function resizeMatrix() {
  canvas.width = canvas.offsetWidth;
  canvas.height = canvas.offsetHeight;
}
resizeMatrix();
window.addEventListener("resize", resizeMatrix);

const letters = "„Ç¢„Ç°„Ç§„Ç£„Ç¶„É¥„Ç®„Çß„Ç™„Ç´„Ç¨„Ç≠„ÇÆ„ÇØ„Ç∞„Ç±„Ç≤„Ç≥„Ç¥„Çµ„Ç∂„Ç∑„Ç∏„Çπ„Ç∫„Çª„Çº„ÇΩ„ÇæABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
const fontSize = 16;
let columns = canvas.width / fontSize;
let drops = [];
function initDrops() {
  columns = canvas.width / fontSize;
  drops = [];
  for (let x = 0; x < columns; x++) drops[x] = 1;
}
initDrops();

function drawMatrix() {
  ctx.fillStyle = "rgba(0, 0, 0, 0.05)";
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = "#0F0";
  ctx.font = fontSize + "px monospace";
  for (let i = 0; i < drops.length; i++) {
    const text = letters.charAt(Math.floor(Math.random() * letters.length));
    ctx.fillText(text, i * fontSize, drops[i] * fontSize);
    if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) drops[i] = 0;
    drops[i]++;
  }
}
setInterval(drawMatrix, 50);

// ===== Player =====
const audio = document.getElementById('audio');
document.getElementById('play-btn').onclick = () => audio.play();
document.getElementById('pause-btn').onclick = () => audio.pause();
document.getElementById('mute-btn').onclick = () => audio.muted = !audio.muted;

// ===== Metadatos =====
const nowPlaying = document.getElementById('now-playing');
async function cargarMetadata() {
  try {
    const res = await fetch("https://stream.zeno.fm/ezq3fcuf5ehvv?json=1");
    const data = await res.json();
    if (data.title) nowPlaying.textContent = data.title;
    else nowPlaying.textContent = "En vivo - Sonar Rock";
  } catch {
    nowPlaying.textContent = "En vivo - Sonar Rock";
  }
}
setInterval(cargarMetadata, 10000);
cargarMetadata();
</script>


  <!-- Social Media -->
  <section class="social-section">
    <div class="container">
      <h2 class="section-title">Redes Sociales</h2>
      <div class="social-buttons">
        <a href="https://chat.whatsapp.com/L3qooPAvdXMBmos5oWTKgH" target="_blank" class="social-btn whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
        <a href="https://www.facebook.com/share/19CxAjJvb8/?mibextid=wwXIfr" target="_blank" class="social-btn facebook">
          <i class="fab fa-facebook-f"></i>
        </a>
        <a href="https://www.instagram.com/sonar_rockgdl?igsh=bjlma2JpMXQwbDBv" target="_blank" class="social-btn instagram">
          <i class="fab fa-instagram"></i>
        </a>
        <a href="https://open.spotify.com/show/6mPcjQLeDdCwxzJe3PLlyU?si=TiadCqdlRCyd97QygWQWfA" target="_blank" class="social-btn spotify">
          <i class="fab fa-spotify"></i>
        </a>
        <a href="https://go.ivoox.com/sq/2661206" target="_blank" class="social-btn ivoox">
          <i class="fas fa-podcast"></i>
        </a>
      </div>
    </div>
  </section>

  <section class="embed-section">
  <div class="container" style="max-width: 650px; margin: auto;">
    <h2 class="section-title" style="margin-bottom: 15px;">Escucha en Spotify</h2>
    <div class="player-wrapper">
      <!-- Spotify Embed -->
      <iframe
        src="https://open.spotify.com/embed/show/6mPcjQLeDdCwxzJe3PLlyU?si=TiadCqdlRCyd97QygWQWfA"
        width="100%"
        height="170"
        frameborder="0"
        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
        loading="lazy"
        style="border-radius: 12px; box-shadow: 0 8px 24px rgb(0 0 0 / 0.6);">
      </iframe>
    </div>

    <h2 class="section-title" style="margin: 30px 0 15px;">Escucha en iVoox</h2>
    <div id="podcast-player" class="player-wrapper"></div>
  </div>
</section>

<style>
  .player-wrapper {
    width: 100%;
    max-width: 650px;
    height: 170px;
    background: #121212;
    border-radius: 12px;
    box-shadow: 0 8px 24px rgb(0 0 0 / 0.6);
    display: flex;
    align-items: center;
    padding: 15px 20px;
    box-sizing: border-box;
    color: #fff;
    font-family: "Spotify Circular", Arial, sans-serif;
    gap: 20px;
  }
  #podcast-player > div {
    display: flex;
    width: 100%;
    gap: 20px;
    align-items: center;
  }
  #podcast-player img {
    width: 140px;
    height: 140px;
    border-radius: 12px;
    object-fit: cover;
    flex-shrink: 0;
  }
  #podcast-player h3 {
    font-size: 16px;
    margin: 0 0 6px 0;
    font-weight: 700;
    color: #faf8f7; 
  }
  #podcast-player p {
    font-size: 9px;
    color: #b3b3b3;
    margin: 0 0 10px 0;
  }
  #podcast-player audio {
    width: 100%;
    outline: none;
    filter: drop-shadow(0 1px 1px rgba(0,0,0,0.5));
    border-radius: 8px;
    background: #222;
  }
  .section-title {
    color: #FF6600 !important;
    font-family: "Spotify Circular", Arial, sans-serif;
  }
</style>

<script>
  async function loadLatestIvooxEpisode() {
    const feedUrl = "https://corsproxy.io/?https://www.ivoox.com/feed_fg_f12661206_filtro_1.xml";

    try {
      const response = await fetch(feedUrl);
      const xmlText = await response.text();
      const parser = new DOMParser();
      const xml = parser.parseFromString(xmlText, "text/xml");

      const item = xml.querySelector("item");
      if (!item) throw new Error("No se encontr√≥ ning√∫n episodio");

      const title = item.querySelector("title").textContent;
      const audioUrl = item.querySelector("enclosure").getAttribute("url");
      const pubDate = new Date(item.querySelector("pubDate").textContent).toLocaleDateString();
      const imageUrl = item.querySelector("itunes\\:image, image")?.getAttribute("href") || "https://static-1.ivoox.com/img/podcast_default.jpg";

      const playerHTML = `
        <div>
          <img src="${imageUrl}" alt="Car√°tula episodio" />
          <div style="flex:1;">
            <h3>${title}</h3>
            <p>Publicado el ${pubDate}</p>
            <audio controls preload="none">
              <source src="${audioUrl}" type="audio/mpeg" />
              Tu navegador no soporta audio HTML5.
            </audio>
          </div>
        </div>
      `;

      document.getElementById("podcast-player").innerHTML = playerHTML;
    } catch (error) {
      document.getElementById("podcast-player").innerHTML = `<p style="color:#f00;">No se pudo cargar el reproductor. Intenta m√°s tarde.</p>`;
      console.error("Error cargando el feed:", error);
    }
  }

  loadLatestIvooxEpisode();
</script>
  </div>
    </section>

  <!-- Staff Section -->
  <section class="staff-section">
    <div class="container">
      <h2 class="section-title">Nuestro Staff</h2>
      <div class="staff-grid">
        <div class="staff-member">
          <img src="attached_assets/Wendy_1749601460841.jpeg" alt="Wendy" class="staff-image">
          <h3>Wendy</h3>
        </div>
        <div class="staff-member">
          <img src="attached_assets/Alvaro_1749601460841.jpeg" alt="Alvaro" class="staff-image">
          <h3>El Contralor</h3>
        </div>
        <div class="staff-member">
          <img src="attached_assets/Hans_1749601460841.jpeg" alt="Hans" class="staff-image">
          <h3>Hans</h3>
        </div>
        <div class="staff-member">
          <img src="attached_assets/El Chris_1749601460841.jpeg" alt="El Chris" class="staff-image">
          <h3>El Chris</h3>
        </div>
      </div>
    </div>
  </section>

  <!-- About Sections -->
    <section class="about-section">
        <div class="container">
            <div class="about-content">
                <h2 class="section-title">¬øQui√©nes Somos?</h2>
                <p class="about-text">
                    Sonar Rock es una trinchera sonora, un espacio libre y apasionado que nace en M√©xico con una misi√≥n clara: ser un foro abierto para las bandas emergentes de la escena local. Creemos en el talento que nace en los garajes, en las letras que cuentan historias reales, en los riffs que a√∫n no han llegado a la radio comercial‚Ä¶ pero que merecen ser escuchados. Somos la radio independiente porque no seguimos formatos impuestos ni playlists predecibles. Aqu√≠, el rock tiene todas sus caras: lo cl√°sico que marc√≥ generaciones, lo contempor√°neo que sacude conciencias, y lo nuevo que est√° construyendo el futuro del g√©nero desde lo subterr√°neo hacia la superficie.
                </p>
            </div>
        </div>
    </section>

    <section class="about-section">
        <div class="container">
            <div class="about-content">
                <h2 class="section-title">¬øQu√© es Sonar Rock?</h2>
                <p class="about-text">
                    En Sonar Rock, celebramos la esencia del rock n‚Äô roll: su rebeld√≠a, su poes√≠a, su energ√≠a y su eterna capacidad de conectar almas. Transmitimos con el coraz√≥n puesto en cada acorde, convencidos de que la m√∫sica aut√©ntica todav√≠a tiene mucho que decir. Sonar Rock: donde el presente del rock se encuentra con su historia‚Ä¶ y con su porvenir.
                </p>
            </div>
        </div>
    </section>
  </section>

  <!-- Scripts -->
  <script>
  document.addEventListener('DOMContentLoaded', function() {
    const playBtn = document.getElementById('playBtn');
    const audioPlayer = document.getElementById('audioPlayer');
    const volumeSlider = document.getElementById('volumeSlider');
    const bars = document.querySelectorAll('.bar');

    let isPlaying = false;
    let visualizerInterval;

    playBtn.addEventListener('click', function () {
      if (isPlaying) {
        audioPlayer.pause();
        playBtn.innerHTML = '<i class="fas fa-play"></i>';
        stopVisualizer();
      } else {
        audioPlayer.load();
        audioPlayer.play().catch(e => console.error('Error al reproducir:', e));
        playBtn.innerHTML = '<i class="fas fa-pause"></i>';
        startVisualizer();
      }
      isPlaying = !isPlaying;
    });

    volumeSlider.addEventListener('input', function () {
      audioPlayer.volume = this.value / 100;
    });

    function startVisualizer() {
      visualizerInterval = setInterval(() => {
        bars.forEach(bar => {
          const height = Math.random() * 30 + 5;
          bar.style.height = height + 'px';
        });
      }, 100);
    }

    function stopVisualizer() {
      clearInterval(visualizerInterval);
      bars.forEach(bar => bar.style.height = '5px');
    }

    audioPlayer.volume = 1.0;
  });
  </script>

</body>
</html>
