<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sonar Rock - La Radio Independiente</title>
  <link href="style.css" rel="stylesheet" type="text/css" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#ff6600">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Favicon general -->
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="shortcut icon" href="/icons/favicon.ico">

  <!-- Apple Touch Icon -->
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
  <meta name="apple-mobile-web-app-title" content="Sonar Rock">

  <!-- Android Chrome Icons -->
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-chrome-192x192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="/icons/android-chrome-512x512.png">

  <!-- Evita traducción automática en Chrome -->
  <meta name="google" content="notranslate">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="container">
      <div class="logo-section">
        <img src="attached_assets/logo_1749601460841.jpeg" alt="Sonar Rock Logo" class="logo">
        <div class="title-section">
          <h1>LA RADIO INDEPENDIENTE</h1>
        </div>
      </div>
    </div>
  </header>

<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reproductor Sonar Rock</title>

<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
/>

<style>
html, body { margin:0; padding:0; height:100%; }

body {
  display: flex;
  justify-content: center;
  align-items: center;
  background: url("img/background.jpg") no-repeat center center/cover;
  font-family: Arial, sans-serif;
  color: white;
  overflow: hidden;
}

.player {
  position: relative;
  text-align: center;
  background: rgba(0,0,0,0.5);
  padding: 20px 40px;
  border-radius: 20px;
  box-shadow: 0 0 20px rgba(0,0,0,0.5);
  z-index: 1;
  width: 70%;
  max-width: 900px;
}

.en-vivo { font-size:1.2rem; color:#ffcc66; margin-bottom:15px; }

.controles {
  display:flex;
  justify-content:center;
  gap:30px;
  position: relative;
  z-index: 2;
}

.controles button {
  background:none;
  border:none;
  color:white;
  font-size:3.5rem;
  cursor:pointer;
  transition: transform 0.2s, color 0.2s, box-shadow 0.3s;
  border-radius: 50%;
}

.controles button:hover { transform:scale(1.2); color:#ff6600; }
.controles button:active { transform:scale(1.5); }

audio { display:none; }

#visualizer {
  position:absolute;
  bottom:10px;
  left:0;
  width:100%;
  height:140px;
  z-index:0;
}
</style>
</head>
<body>

<div class="player">
  <div class="en-vivo">En vivo Miércoles 21:00</div>

  <audio id="cancion">
    <source src="https://stream.zeno.fm/ezq3fcuf5ehvv" type="audio/mpeg">
    Tu navegador no soporta el audio.
  </audio>

  <div class="controles">
    <button id="play-btn"><i class="bi bi-play-circle-fill"></i></button>
    <button id="pause-btn"><i class="bi bi-pause-circle-fill"></i></button>
    <button id="mute-btn"><i class="bi bi-volume-mute-fill"></i></button>
  </div>
</div>

<canvas id="visualizer"></canvas>

<script>
const audio = document.getElementById("cancion");
const playBtn = document.getElementById("play-btn");
const pauseBtn = document.getElementById("pause-btn");
const muteBtn = document.getElementById("mute-btn");
const canvas = document.getElementById("visualizer");
const ctx = canvas.getContext("2d");

// Ajustar canvas
function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = 140;
}
window.addEventListener("resize", resizeCanvas);
resizeCanvas();

// AudioContext para reproducir audio
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

playBtn.addEventListener("click", () => {
  if(audioCtx.state === "suspended") audioCtx.resume();
  audio.play().catch(err => console.log(err));
});
pauseBtn.addEventListener("click", () => audio.pause());
muteBtn.addEventListener("click", () => {
  audio.muted = !audio.muted;
  muteBtn.innerHTML = audio.muted 
    ? `<i class="bi bi-volume-up-fill"></i>` 
    : `<i class="bi bi-volume-mute-fill"></i>`;
});

// Ondas simuladas
const bufferLength = 512;
let previousY = new Array(bufferLength).fill(canvas.height/2);

function draw() {
  requestAnimationFrame(draw);
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Visualizador tipo ondas
  const gradient = ctx.createLinearGradient(0,0,canvas.width,0);
  gradient.addColorStop(0,'#ff6600');
  gradient.addColorStop(0.5,'#ffcc66');
  gradient.addColorStop(1,'#ff6600');
  ctx.strokeStyle = gradient;
  ctx.lineWidth = 3;
  ctx.beginPath();

  const sliceWidth = canvas.width / bufferLength;
  let x = 0;
  for(let i=0;i<bufferLength;i++){
    const rand = Math.random()*0.4 + 0.8;
    const y = canvas.height/2 + Math.sin(i/10 + Date.now()/300)*canvas.height/4*rand;
    const smoothY = previousY[i]*0.7 + y*0.3;
    if(i===0) ctx.moveTo(x,smoothY);
    else ctx.lineTo(x,smoothY);
    previousY[i] = smoothY;
    x += sliceWidth;
  }
  ctx.lineTo(canvas.width, canvas.height/2);
  ctx.stroke();

  // Brillo del visualizador
  const brightness = audio.paused ? 0.1 : 0.6 + Math.random()*0.4;
  ctx.shadowColor = `rgba(255,204,102,${brightness})`;
  ctx.shadowBlur = 20*brightness;

  // Resplandor radial detrás de botones
  const glowIntensity = audio.paused ? 0.2 : 0.7 + Math.random()*0.3;
  document.querySelectorAll('.controles button').forEach(btn => {
    btn.style.boxShadow = `0 0 30px 10px rgba(255,204,102,${glowIntensity})`;
  });
}

draw();
</script>
</body>
</html>


  <!-- Social Media -->
  <section class="social-section">
    <div class="container">
      <h2 class="section-title">Redes Sociales</h2>
      <div class="social-buttons">
        <a href="https://chat.whatsapp.com/L3qooPAvdXMBmos5oWTKgH" target="_blank" class="social-btn whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
        <a href="https://www.facebook.com/share/19CxAjJvb8/?mibextid=wwXIfr" target="_blank" class="social-btn facebook">
          <i class="fab fa-facebook-f"></i>
        </a>
        <a href="https://www.instagram.com/sonar_rockgdl?igsh=bjlma2JpMXQwbDBv" target="_blank" class="social-btn instagram">
          <i class="fab fa-instagram"></i>
        </a>
        <a href="https://open.spotify.com/show/6mPcjQLeDdCwxzJe3PLlyU?si=TiadCqdlRCyd97QygWQWfA" target="_blank" class="social-btn spotify">
          <i class="fab fa-spotify"></i>
        </a>
        <a href="https://go.ivoox.com/sq/2661206" target="_blank" class="social-btn ivoox">
          <i class="fas fa-podcast"></i>
        </a>
      </div>
    </div>
  </section>

  <section class="embed-section">
  <div class="container" style="max-width: 650px; margin: auto;">
    <h2 class="section-title" style="margin-bottom: 15px;">Escucha en Spotify</h2>
    <div class="player-wrapper">
      <!-- Spotify Embed -->
      <iframe
        src="https://open.spotify.com/embed/show/6mPcjQLeDdCwxzJe3PLlyU?si=TiadCqdlRCyd97QygWQWfA"
        width="100%"
        height="170"
        frameborder="0"
        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
        loading="lazy"
        style="border-radius: 12px; box-shadow: 0 8px 24px rgb(0 0 0 / 0.6);">
      </iframe>
    </div>

    <h2 class="section-title" style="margin: 30px 0 15px;">Escucha en iVoox</h2>
    <div id="podcast-player" class="player-wrapper"></div>
  </div>
</section>

<style>
  .player-wrapper {
    width: 100%;
    max-width: 650px;
    height: 170px;
    background: #121212;
    border-radius: 12px;
    box-shadow: 0 8px 24px rgb(0 0 0 / 0.6);
    display: flex;
    align-items: center;
    padding: 15px 20px;
    box-sizing: border-box;
    color: #fff;
    font-family: "Spotify Circular", Arial, sans-serif;
    gap: 20px;
  }
  #podcast-player > div {
    display: flex;
    width: 100%;
    gap: 20px;
    align-items: center;
  }
  #podcast-player img {
    width: 140px;
    height: 140px;
    border-radius: 12px;
    object-fit: cover;
    flex-shrink: 0;
  }
  #podcast-player h3 {
    font-size: 16px;
    margin: 0 0 6px 0;
    font-weight: 700;
    color: #faf8f7; 
  }
  #podcast-player p {
    font-size: 9px;
    color: #b3b3b3;
    margin: 0 0 10px 0;
  }
  #podcast-player audio {
    width: 100%;
    outline: none;
    filter: drop-shadow(0 1px 1px rgba(0,0,0,0.5));
    border-radius: 8px;
    background: #222;
  }
  .section-title {
    color: #FF6600 !important;
    font-family: "Spotify Circular", Arial, sans-serif;
  }
</style>

<script>
  async function loadLatestIvooxEpisode() {
    const feedUrl = "https://corsproxy.io/?https://www.ivoox.com/feed_fg_f12661206_filtro_1.xml";

    try {
      const response = await fetch(feedUrl);
      const xmlText = await response.text();
      const parser = new DOMParser();
      const xml = parser.parseFromString(xmlText, "text/xml");

      const item = xml.querySelector("item");
      if (!item) throw new Error("No se encontró ningún episodio");

      const title = item.querySelector("title").textContent;
      const audioUrl = item.querySelector("enclosure").getAttribute("url");
      const pubDate = new Date(item.querySelector("pubDate").textContent).toLocaleDateString();
      const imageUrl = item.querySelector("itunes\\:image, image")?.getAttribute("href") || "https://static-1.ivoox.com/img/podcast_default.jpg";

      const playerHTML = `
        <div>
          <img src="${imageUrl}" alt="Carátula episodio" />
          <div style="flex:1;">
            <h3>${title}</h3>
            <p>Publicado el ${pubDate}</p>
            <audio controls preload="none">
              <source src="${audioUrl}" type="audio/mpeg" />
              Tu navegador no soporta audio HTML5.
            </audio>
          </div>
        </div>
      `;

      document.getElementById("podcast-player").innerHTML = playerHTML;
    } catch (error) {
      document.getElementById("podcast-player").innerHTML = `<p style="color:#f00;">No se pudo cargar el reproductor. Intenta más tarde.</p>`;
      console.error("Error cargando el feed:", error);
    }
  }

  loadLatestIvooxEpisode();
</script>
  </div>
    </section>

  <!-- Staff Section -->
  <section class="staff-section">
    <div class="container">
      <h2 class="section-title">Nuestro Staff</h2>
      <div class="staff-grid">
        <div class="staff-member">
          <img src="attached_assets/Wendy_1749601460841.jpeg" alt="Wendy" class="staff-image">
          <h3>Wendy</h3>
        </div>
        <div class="staff-member">
          <img src="attached_assets/Alvaro_1749601460841.jpeg" alt="Alvaro" class="staff-image">
          <h3>El Contralor</h3>
        </div>
        <div class="staff-member">
          <img src="attached_assets/Hans_1749601460841.jpeg" alt="Hans" class="staff-image">
          <h3>Hans</h3>
        </div>
        <div class="staff-member">
          <img src="attached_assets/El Chris_1749601460841.jpeg" alt="El Chris" class="staff-image">
          <h3>El Chris</h3>
        </div>
      </div>
    </div>
  </section>

  <!-- About Sections -->
    <section class="about-section">
        <div class="container">
            <div class="about-content">
                <h2 class="section-title">¿Quiénes Somos?</h2>
                <p class="about-text">
                    Sonar Rock es una trinchera sonora, un espacio libre y apasionado que nace en México con una misión clara: ser un foro abierto para las bandas emergentes de la escena local. Creemos en el talento que nace en los garajes, en las letras que cuentan historias reales, en los riffs que aún no han llegado a la radio comercial… pero que merecen ser escuchados. Somos la radio independiente porque no seguimos formatos impuestos ni playlists predecibles. Aquí, el rock tiene todas sus caras: lo clásico que marcó generaciones, lo contemporáneo que sacude conciencias, y lo nuevo que está construyendo el futuro del género desde lo subterráneo hacia la superficie.
                </p>
            </div>
        </div>
    </section>

    <section class="about-section">
        <div class="container">
            <div class="about-content">
                <h2 class="section-title">¿Qué es Sonar Rock?</h2>
                <p class="about-text">
                    En Sonar Rock, celebramos la esencia del rock n’ roll: su rebeldía, su poesía, su energía y su eterna capacidad de conectar almas. Transmitimos con el corazón puesto en cada acorde, convencidos de que la música auténtica todavía tiene mucho que decir. Sonar Rock: donde el presente del rock se encuentra con su historia… y con su porvenir.
                </p>
            </div>
        </div>
    </section>
  </section>

  <!-- Scripts -->
  <script>
  document.addEventListener('DOMContentLoaded', function() {
    const playBtn = document.getElementById('playBtn');
    const audioPlayer = document.getElementById('audioPlayer');
    const volumeSlider = document.getElementById('volumeSlider');
    const bars = document.querySelectorAll('.bar');

    let isPlaying = false;
    let visualizerInterval;

    playBtn.addEventListener('click', function () {
      if (isPlaying) {
        audioPlayer.pause();
        playBtn.innerHTML = '<i class="fas fa-play"></i>';
        stopVisualizer();
      } else {
        audioPlayer.load();
        audioPlayer.play().catch(e => console.error('Error al reproducir:', e));
        playBtn.innerHTML = '<i class="fas fa-pause"></i>';
        startVisualizer();
      }
      isPlaying = !isPlaying;
    });

    volumeSlider.addEventListener('input', function () {
      audioPlayer.volume = this.value / 100;
    });

    function startVisualizer() {
      visualizerInterval = setInterval(() => {
        bars.forEach(bar => {
          const height = Math.random() * 30 + 5;
          bar.style.height = height + 'px';
        });
      }, 100);
    }

    function stopVisualizer() {
      clearInterval(visualizerInterval);
      bars.forEach(bar => bar.style.height = '5px');
    }

    audioPlayer.volume = 1.0;
  });
  </script>

</body>
</html>
