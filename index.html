<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sonar Rock - La Radio Independiente</title>

  <!-- CSS -->
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="player.css">

  <!-- Font Awesome -->
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

  <!-- PWA -->
<link rel="manifest" href="/icons/site.webmanifest">
<meta name="theme-color" content="#ff6600">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<!-- Icons -->
<link rel="apple-touch-icon" href="/icons/apple-touch-icon.png">
<link rel="icon" href="/icons/favicon.ico">
<link rel="icon" type="image/svg+xml" href="/icons/favicon.svg">

  <!-- iOS Splash Screen -->
<link
  rel="apple-touch-startup-image"
  href="/icons/splash-iphone.png"
  media="(device-width: 375px) and (device-height: 812px)
  and (-webkit-device-pixel-ratio: 3)"
>


  <!-- Policies -->
  <meta http-equiv="Permissions-Policy" content="encrypted-media=()">
  <meta name="google" content="notranslate">
</head>


<body>

  <!-- ========================= -->
  <!-- HEADER -->
  <!-- ========================= -->
  <header class="header">
    <div class="container">
      <div class="logo-section">
        <img
          src="attached_assets/logo_1749601460841.jpeg"
          alt="Sonar Rock Logo"
          class="logo"
        >
        <div class="title-section">
          <h1>LA RADIO INDEPENDIENTE</h1>
        </div>
      </div>
    </div>
  </header>

  <!-- ========================= -->
  <!-- IMAGEN PRINCIPAL -->
  <!-- ========================= -->
  <section class="main-section">
    <div class="container">
      <div class="main-image-container">
        <img
          src="attached_assets/sonarrock.png"
          alt="Sonar Rock"
          class="main-image"
        >
      </div>
    </div>
  </section>
<!-- ========================= -->
<!-- REPRODUCTOR SONAR ROCK -->
<!-- ========================= -->

<section class="player-section">
  <div class="player-container" id="player">

    <img src="img/background1.png" alt="Sonar Rock Background" class="player-bg">

    <canvas id="matrixCanvas" aria-hidden="true"></canvas>

    <div class="overlay"></div>

    <div class="player-content">

      <div id="now-playing" class="now-playing">
      </div>

      <div id="live-indicator" class="live-badge">
        <span class="dot"></span>
        <span class="text">EN VIVO</span>
      </div>

      <div class="controls">
        <button id="playPauseBtn" class="btn" aria-label="Play">
          <i class="fas fa-play"></i>
        </button>
        <button id="stop-btn" class="btn" aria-label="Stop">
          <i class="fas fa-stop"></i>
        </button>
        <button id="mute-btn" class="btn" aria-label="Mute">
          <i class="fas fa-volume-up"></i>
        </button>
        <input id="volume" type="range" min="0" max="1" step="0.01" value="1">
      </div>

      <div class="progress-wrapper">
        <div class="progress-container">
          <div id="radio-progress"></div>
        </div>
        <div id="time-display">00:00:00</div>
      </div>

    </div>

    <audio id="radio-audio" preload="auto">
      <source src="https://stream.zeno.fm/ezq3fcuf5ehvv" type="audio/mpeg">
    </audio>

  </div>
</section>

<button id="installBtn" style="display:none;">
  üì≤ Instalar Sonar Rock
</button>


<!-- ========================= -->
<!-- REDES SOCIALES -->
<!-- ========================= -->
<section class="social-section">
  <div class="container">
    <h2 class="section-title">Redes Sociales</h2>
    <div class="social-buttons">
      <a href="https://chat.whatsapp.com/L3qooPAvdXMBmos5oWTKgH" target="_blank" class="social-btn whatsapp"><i class="fab fa-whatsapp"></i></a>
      <a href="https://www.facebook.com/share/19CxAjJvb8/?mibextid=wwXIfr" target="_blank" class="social-btn facebook"><i class="fab fa-facebook-f"></i></a>
      <a href="https://www.instagram.com/sonar_rockgdl?igsh=bjlma2JpMXQwbDBv" target="_blank" class="social-btn instagram"><i class="fab fa-instagram"></i></a>
      <a href="https://open.spotify.com/show/6mPcjQLeDdCwxzJe3PLlyU" target="_blank" class="social-btn spotify"><i class="fab fa-spotify"></i></a>
      <a href="https://go.ivoox.com/sq/2661206" target="_blank" class="social-btn ivoox"><i class="fas fa-podcast"></i></a>
    </div>
  </div>
</section>

<div class="disco-section">
  <h2 class="section-title">El Disco de la Semana</h2>
  <h3 class="section-subtitle" id="track-title">Fleetwood Mac ‚Äì Rumours</h3>
  <img id="cover" alt="Portada del Disco de la Semana" />

  <div id="disco-player" class="custom-player">
    <audio id="disco-audio" controls preload="metadata"></audio>
    <div id="disco-progress-container" class="progress-container">
      <div id="disco-progress"></div>
    </div>
  </div>
</div>

<!-- ========================= -->
<!-- EMBEDS -->
<!-- ========================= -->
<section class="embed-section">
  <div class="container" style="max-width:650px; margin:auto;">
    <h3 class="section-title">Escucha en Spotify</h3>
    <iframe src="https://open.spotify.com/embed/show/6mPcjQLeDdCwxzJe3PLlyU"
      width="100%" height="170" loading="lazy"></iframe>

    <h3 class="section-title" style="margin-top:40px;">Escucha en iVoox</h3>
    <div id="podcast-player"></div>
  </div>
</section>

<!-- ========================= -->
<!-- STAFF -->
<!-- ========================= -->
<section class="staff-section">
  <div class="container">
    <h2 class="section-title" style="margin-bottom:40px;">Staff</h2>
    <div class="staff-grid">
      <div class="staff-member">
        <img src="attached_assets/Wendy_1749601460841.jpeg" alt="Wendy" class="staff-image">
        <h3>Wendy</h3>
      </div>
      <div class="staff-member">
        <img src="attached_assets/Alvaro_1749601460841.jpeg" alt="Alvaro" class="staff-image">
        <h3>El Contralor</h3>
      </div>
      <div class="staff-member">
        <img src="attached_assets/Hans_1749601460841.jpeg" alt="Hans" class="staff-image">
        <h3>Hans</h3>
      </div>
      <div class="staff-member">
        <img src="attached_assets/El Chris_1749601460841.jpeg" alt="El Chris" class="staff-image">
        <h3>El Chris</h3>
      </div>
    </div>
  </div>
</section>

<!-- ========================= -->
<!-- ¬øQUI√âNES SOMOS? -->
<!-- ========================= -->
<section class="about-section">
  <div class="container">
    <div class="about-content">
      <h2 class="section-title">¬øQui√©nes Somos?</h2>
      <p class="about-text">
        Sonar Rock es una trinchera sonora, un espacio libre y apasionado que nace en Guadalajara, Jalisco, M√©xico.
        Nuestra misi√≥n es simple pero poderosa: abrir un foro aut√©ntico para las bandas emergentes, apoyar la escena local y mantener viva la esencia del rock en todas sus vertientes.

        Creemos en la fuerza de la m√∫sica como motor de cambio, como punto de encuentro y como refugio de quienes buscan algo distinto a lo convencional.
        En Sonar Rock somos m√°s que una radio: somos comunidad, resistencia y pasi√≥n por el sonido que nos une.
      </p>
    </div>
  </div>
</section>

<!-- ========================= -->
<!-- ¬øQU√â ES SONAR ROCK? -->
<!-- ========================= -->
<section class="about-section">
  <div class="container">
    <div class="about-content">
      <h2 class="section-title">¬øQu√© es Sonar Rock?</h2>
      <p class="about-text">
        Sonar Rock celebra la esencia eterna del rock n‚Äô roll:

        Su rebeld√≠a frente a lo establecido.

        Su poes√≠a en cada letra y acorde.

        Su energ√≠a que enciende escenarios y corazones.

        Su capacidad de conectar almas m√°s all√° de fronteras y generaciones.

        Aqu√≠ el rock no se escucha de fondo, se vive. Somos un canal donde conviven lo cl√°sico, lo alternativo y lo emergente, siempre con la autenticidad como bandera.
      </p>
    </div>
  </div>
  
<!-- ========================= -->
<!-- JS -->
<!-- ========================= -->
<script src="player.js"></script>
<script src="disco.js"></script>
<script src="ivoox.js"></script>


  <!-- REGISTRO SERVICE WORKER -->
  <script>
 
    if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/service-worker.js')
        .then(reg => {
          console.log('‚úÖ Service Worker registrado:', reg.scope);
        })
        .catch(err => {
          console.error('‚ùå Error al registrar Service Worker:', err);
        });
    });
  }
</script>

  <script>
let deferredPrompt;
const installBtn = document.getElementById('installBtn');

window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
  installBtn.style.display = 'block';

  installBtn.addEventListener('click', () => {
    installBtn.style.display = 'none';
    deferredPrompt.prompt();

    deferredPrompt.userChoice.then(choice => {
      if (choice.outcome === 'accepted') {
        console.log('‚úÖ PWA instalada');
      } else {
        console.log('‚ùå Instalaci√≥n cancelada');
      }
      deferredPrompt = null;
    });
  });
});
</script>

  <script>
/* =========================
   MODO CONEXI√ìN LENTA
========================= */

function checkConnection() {
  const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;

  if (!connection) return;

  const slow =
    connection.saveData ||
    ['slow-2g', '2g', '3g'].includes(connection.effectiveType);

  if (slow) {
    document.body.classList.add('slow-connection');
    console.warn('‚ö†Ô∏è Conexi√≥n lenta detectada');
  } else {
    document.body.classList.remove('slow-connection');
    console.log('‚úÖ Conexi√≥n normal');
  }
}

window.addEventListener('load', checkConnection);
if (navigator.connection) {
  navigator.connection.addEventListener('change', checkConnection);
}
</script>

  <script>
window.addEventListener('offline', () => {
  alert('‚ö†Ô∏è Conexi√≥n perdida. Intentaremos reconectar.');
});

window.addEventListener('online', () => {
  console.log('‚úÖ Conexi√≥n restaurada');
});
</script>

  
</body>
</html>
